<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favorites - My Music Vault</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ÂØºËà™Ê†è -->
    <nav>
        <h1>My Music Vault</h1>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="playlists.html">Playlists</a>
            <a href="recent.html">Recent Play</a>
            <a href="recommendations.html">Recommendations</a>
            <a href="favorites.html" class="active">My Favorites</a>
        </div>
            <button class="theme-toggle" id="theme-toggle">
                <i class="fas fa-moon"></i>
            </button>
        </nav>

    <!-- Êî∂ËóèÊ≠åÊõ≤ÊùøÂùó -->
    <section class="hero-section">
        <h2>My Favorite Songs</h2>
        <p>Your personal collection of loved tracks</p>
        <div id="favorite-songs-list" class="song-list">
            <p id="empty-favorite">No favorite songs yet. Add some you love!</p>
        </div>
    </section>

    <!-- Ê≠åÊõ≤Êí≠ÊîæÊùøÂùó -->
    <section class="mini-player-section">
        <h3>Now Playing</h3>
        <div class="player-card">
            <img id="current-song-img" src="./images/song-cover.svg" alt="Song Cover">
            <div class="song-info">
                <h3 id="current-song-title">Lemon Tree - Fool's Garden</h3>
                <p id="current-song-desc">Relaxing rhythm, perfect for unwinding</p>
                <button id="favorite-btn" onclick="toggleFavorite()" class="favorite-btn">
                    <i class="fa-regular fa-heart"></i> Add to Favorites
                </button>
            </div>
            <div class="player-controls">
                <button onclick="playPause()">‚ñ∂Ô∏è Play/Pause</button>
                <!-- Èü≥ÈáèÊéßÂà∂ -->
                <div class="volume-container">
                    <i class="fa-solid fa-volume-up" id="volume-icon"></i>
                    <input type="range" id="volume-bar" min="0" max="100" value="80" oninput="adjustVolume()">
                </div>
                <!-- Êí≠ÊîæËøõÂ∫¶Êù° -->
                <div class="progress-container">
                    <span id="current-time">0:00</span>
                    <input type="range" id="progress-bar" min="0" max="100" value="0" oninput="setProgress()">
                    <span id="total-time">3:20</span>
                </div>
            </div>
        </div>
    </section>

    <script src="js/theme-toggle.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setupThemeToggle();
            
            // ‰ªéÊú¨Âú∞Â≠òÂÇ®Ëé∑ÂèñÊî∂ËóèÊ≠åÊõ≤
            function getFavoriteSongs() {
                const favorites = localStorage.getItem('favoriteSongs');
                return favorites ? JSON.parse(favorites) : [];
            }

            // ‰øùÂ≠òÊî∂ËóèÊ≠åÊõ≤Âà∞Êú¨Âú∞Â≠òÂÇ®
            function saveFavoriteSongs(favorites) {
                localStorage.setItem('favoriteSongs', JSON.stringify(favorites));
            }

            // Ê∏≤ÊüìÊî∂ËóèÊ≠åÊõ≤ÂàóË°®
            function renderFavoriteSongs() {
                const favorites = getFavoriteSongs();
                const favoriteList = document.getElementById('favorite-songs-list');
                const emptyMessage = document.getElementById('empty-favorite');
                
                // Ê∏ÖÁ©∫ÂàóË°®
                while (favoriteList.firstChild) {
                    favoriteList.removeChild(favoriteList.firstChild);
                }
                
                // Â¶ÇÊûúÊ≤°ÊúâÊî∂ËóèÊ≠åÊõ≤ÔºåÊòæÁ§∫Á©∫Áä∂ÊÄÅ
                if (favorites.length === 0) {
                    const emptyP = document.createElement('p');
                    emptyP.id = 'empty-favorite';
                    emptyP.textContent = 'No favorite songs yet. Add some you love!';
                    favoriteList.appendChild(emptyP);
                } else {
                    // Ê∏≤ÊüìÊî∂ËóèÊ≠åÊõ≤
                    favorites.forEach((song, index) => {
                        const songItem = document.createElement('div');
                        songItem.className = 'song-item';
                        
                        const songDetails = document.createElement('div');
                        songDetails.className = 'song-details';
                        songDetails.onclick = () => playSong(song.title, song.artist, song.description);
                        
                        const titleP = document.createElement('p');
                        titleP.textContent = `${song.title} - ${song.artist}`;
                        
                        const descP = document.createElement('p');
                        descP.textContent = song.description;
                        
                        const removeBtn = document.createElement('button');
                        removeBtn.className = 'song-fav-btn';
                        removeBtn.innerHTML = '<i class="fa-solid fa-heart"></i>';
                        removeBtn.onclick = (e) => {
                            e.stopPropagation(); // ÈòªÊ≠¢ÂÜíÊ≥°
                            removeFromFavorites(index);
                        };
                        
                        songDetails.appendChild(titleP);
                        songDetails.appendChild(descP);
                        songItem.appendChild(songDetails);
                        songItem.appendChild(removeBtn);
                        favoriteList.appendChild(songItem);
                    });
                }
            }

            // ‰ªéÊî∂Ëóè‰∏≠ÁßªÈô§Ê≠åÊõ≤
            function removeFromFavorites(index) {
                const favorites = getFavoriteSongs();
                const removedSong = favorites.splice(index, 1)[0];
                saveFavoriteSongs(favorites);
                renderFavoriteSongs();
                alert(`Removed from favorites: ${removedSong.title} - ${removedSong.artist}`);
            }

            // Êí≠ÊîæÊ≠åÊõ≤
            function playSong(title, artist, description) {
                document.getElementById('current-song-title').textContent = `${title} - ${artist}`;
                document.getElementById('current-song-desc').textContent = description;
                
                console.log(`Playing: ${title} - ${artist}`);
            }

            // ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅ
            function toggleFavorite() {
                const title = document.getElementById('current-song-title').textContent;
                const [songTitle, artist] = title.split(' - ');
                const description = document.getElementById('current-song-desc').textContent;
                
                const favorites = getFavoriteSongs();
                const songIndex = favorites.findIndex(song => song.title === songTitle && song.artist === artist);
                
                if (songIndex === -1) {
                    favorites.push({ title: songTitle, artist, description });
                    alert(`Added to favorites: ${songTitle} - ${artist}`);
                } else {
                    favorites.splice(songIndex, 1);
                    alert(`Removed from favorites: ${songTitle} - ${artist}`);
                }
                
                saveFavoriteSongs(favorites);
                renderFavoriteSongs();
            }

            // Èü≥ÈáèÊéßÂà∂
            function adjustVolume() {
                const volume = document.getElementById('volume-bar').value;
                console.log(`Volume adjusted to: ${volume}%`);
                const volumeIcon = document.getElementById('volume-icon');
                if (volume == 0) {
                    volumeIcon.className = 'fa-solid fa-volume-mute';
                } else if (volume < 50) {
                    volumeIcon.className = 'fa-solid fa-volume-low';
                } else {
                    volumeIcon.className = 'fa-solid fa-volume-up';
                }
            }

            // Êí≠ÊîæÊöÇÂÅú
            function playPause() {
                console.log('Play/Pause toggled');
            }

            // ËÆæÁΩÆÊí≠ÊîæËøõÂ∫¶
            function setProgress() {
                const progress = document.getElementById('progress-bar').value;
                console.log(`Progress set to: ${progress}%`);
            }

            // È°µÈù¢Âä†ËΩΩÊó∂Ê∏≤ÊüìÊî∂ËóèÊ≠åÊõ≤
            renderFavoriteSongs();
        });
    </script>
    
    <!-- Ëø∑‰Ω†Êí≠ÊîæÂô® -->
    <div id="mini-player">
        <div class="player-content">
            <div class="player-info">
                <div class="song-info">
                    <h4 id="now-playing-title">Song Title</h4>
                    <p id="now-playing-artist">Artist</p>
                </div>
            </div>
            
            <div class="player-controls">
                <button id="shuffle-btn" class="control-btn">üîÄ</button>
                <button id="prev-btn" class="control-btn">‚èÆÔ∏è</button>
                <button id="play-pause-btn" class="control-btn play-btn">‚ñ∂Ô∏è</button>
                <button id="next-btn" class="control-btn">‚è≠Ô∏è</button>
                <button id="repeat-btn" class="control-btn">üîÅ</button>
            </div>
            
            <div class="player-progress">
                <span id="current-time">0:00</span>
                <input type="range" id="progress-bar" min="0" max="100" value="0">
                <span id="total-time">0:00</span>
            </div>
            
            <div class="volume-control">
                <button id="volume-btn" class="control-btn">üîä</button>
                <input type="range" id="volume-slider" min="0" max="100" value="80">
            </div>
        </div>
    </div>
    
    <!-- Èü≥È¢ëÂÖÉÁ¥† -->
    <audio id="audio-player" preload="metadata"></audio>
    
    <script src="js/script.js"></script>
    <script src="js/mini-player.js"></script>
</body>
</html>
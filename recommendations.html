<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover - My Music Vault</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ÂØºËà™Ê†è -->
    <nav>
        <h1>My Music Vault</h1>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="playlists.html">Playlists</a>
            <a href="recent.html">Recent Play</a>
            <a href="recommendations.html" class="active">Recommendations</a>
            <a href="favorites.html">My Favorites</a>
        </div>
            <button class="theme-toggle" id="theme-toggle">
                <i class="fas fa-moon"></i>
            </button>
        </nav>

    <!-- Èü≥‰πêÊé®ËçêÊùøÂùóÔºàÂê´ÂàÜÁ±ªÁ≠õÈÄâÔºâ -->
    <section class="hero-section">
        <h2>Recommended Tracks</h2>
        <p>Discover new music tailored to your taste</p>
        <!-- ÂàÜÁ±ªÁ≠õÈÄâ‰∏ãÊãâÊ°Ü -->
        <div class="filter-container">
            <label for="genre-filter">Filter by Genre: </label>
            <select id="genre-filter" onchange="filterSongsByGenre()">
                <option value="all">All Genres</option>
                <option value="folk">Folk</option>
                <option value="pop">Pop</option>
                <option value="indie">Indie</option>
                <option value="mellow">Mellow</option>
            </select>
        </div>
        <!-- Â∏¶ÂàÜÁ±ªÊ†áÁ≠æÁöÑÊ≠åÊõ≤ÂàóË°® -->
        <div class="song-list" id="recommended-songs-list">
            <div class="song-item" data-genre="folk">
                <div class="song-details" onclick="playSong('Hometown Glory', 'Adele', 'Soft piano, emotional lyrics', 'folk')">
                    <p>Hometown Glory - Adele</p>
                    <p>Soft piano, emotional lyrics</p>
                    <span class="genre-tag">Folk</span>
                </div>
                <button class="song-fav-btn" onclick="toggleFavorite('Hometown Glory', 'Adele', 'Soft piano, emotional lyrics')">
                    <i class="fa-regular fa-heart"></i>
                </button>
            </div>
            <div class="song-item" data-genre="indie">
                <div class="song-details" onclick="playSong('Skinny Love', 'Bon Iver', 'Haunting melody, gentle vocals', 'indie')">
                    <p>Skinny Love - Bon Iver</p>
                    <p>Haunting melody, gentle vocals</p>
                    <span class="genre-tag">Indie</span>
                </div>
                <button class="song-fav-btn" onclick="toggleFavorite('Skinny Love', 'Bon Iver', 'Haunting melody, gentle vocals')">
                    <i class="fa-regular fa-heart"></i>
                </button>
            </div>
            <div class="song-item" data-genre="pop">
                <div class="song-details" onclick="playSong('Blinding Lights', 'The Weeknd', 'Upbeat rhythm, 80s vibe', 'pop')">
                    <p>Blinding Lights - The Weeknd</p>
                    <p>Upbeat rhythm, 80s vibe</p>
                    <span class="genre-tag">Pop</span>
                </div>
                <button class="song-fav-btn" onclick="toggleFavorite('Blinding Lights', 'The Weeknd', 'Upbeat rhythm, 80s vibe')">
                    <i class="fa-regular fa-heart"></i>
                </button>
            </div>
            <div class="song-item" data-genre="mellow">
                <div class="song-details" onclick="playSong('Let Her Go', 'Passenger', 'Mellow tune, reflective lyrics', 'mellow')">
                    <p>Let Her Go - Passenger</p>
                    <p>Mellow tune, reflective lyrics</p>
                    <span class="genre-tag">Mellow</span>
                </div>
                <button class="song-fav-btn" onclick="toggleFavorite('Let Her Go', 'Passenger', 'Mellow tune, reflective lyrics')">
                    <i class="fa-regular fa-heart"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Ê≠åÊõ≤Êí≠ÊîæÊùøÂùó -->
    <section class="mini-player-section">
        <h3>Now Playing</h3>
        <div class="player-card">
            <img id="current-song-img" src="./images/song-cover.svg" alt="Song Cover">
            <div class="song-info">
                <h3 id="current-song-title">Lemon Tree - Fool's Garden</h3>
                <p id="current-song-desc">Relaxing rhythm, perfect for unwinding</p>
                <button id="favorite-btn" onclick="toggleFavorite()" class="favorite-btn">
                    <i class="fa-regular fa-heart"></i> Add to Favorites
                </button>
            </div>
            <div class="player-controls">
                <button onclick="playPause()">‚ñ∂Ô∏è Play/Pause</button>
                <!-- Èü≥ÈáèÊéßÂà∂ -->
                <div class="volume-container">
                    <i class="fa-solid fa-volume-up" id="volume-icon"></i>
                    <input type="range" id="volume-bar" min="0" max="100" value="80" oninput="adjustVolume()">
                </div>
                <!-- Êí≠ÊîæËøõÂ∫¶Êù° -->
                <div class="progress-container">
                    <span id="current-time">0:00</span>
                    <input type="range" id="progress-bar" min="0" max="100" value="0" oninput="setProgress()">
                    <span id="total-time">3:20</span>
                </div>
            </div>
        </div>
    </section>

    <script src="./js/script.js"></script>
    <script src="js/theme-toggle.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setupThemeToggle();
        });
        
        // ‰ªéÊú¨Âú∞Â≠òÂÇ®Ëé∑ÂèñÊî∂ËóèÊ≠åÊõ≤
        function getFavoriteSongs() {
            const favorites = localStorage.getItem('favoriteSongs');
            return favorites ? JSON.parse(favorites) : [];
        }

        // ‰øùÂ≠òÊî∂ËóèÊ≠åÊõ≤Âà∞Êú¨Âú∞Â≠òÂÇ®
        function saveFavoriteSongs(favorites) {
            localStorage.setItem('favoriteSongs', JSON.stringify(favorites));
        }

        // ËøáÊª§Ê≠åÊõ≤ÊåâÊµÅÊ¥æ
        function filterSongsByGenre() {
            const genre = document.getElementById('genre-filter').value;
            const songItems = document.querySelectorAll('.song-item');
            
            songItems.forEach(item => {
                if (genre === 'all' || item.dataset.genre === genre) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Êí≠ÊîæÊ≠åÊõ≤
        function playSong(title, artist, description, genre) {
            document.getElementById('current-song-title').textContent = `${title} - ${artist}`;
            document.getElementById('current-song-desc').textContent = description;
            
            // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†ÂÆûÈôÖÁöÑÈü≥È¢ëÊí≠ÊîæÈÄªËæë
            console.log(`Playing: ${title} - ${artist}`);
        }

        // ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅ
        function toggleFavorite(title, artist, description) {
            const favorites = getFavoriteSongs();
            const songIndex = favorites.findIndex(song => song.title === title && song.artist === artist);
            
            if (songIndex === -1) {
                // Ê∑ªÂä†Âà∞Êî∂Ëóè
                favorites.push({ title, artist, description });
                alert(`Added to favorites: ${title} - ${artist}`);
            } else {
                // ‰ªéÊî∂Ëóè‰∏≠ÁßªÈô§
                favorites.splice(songIndex, 1);
                alert(`Removed from favorites: ${title} - ${artist}`);
            }
            
            saveFavoriteSongs(favorites);
        }

        // Èü≥ÈáèÊéßÂà∂
        function adjustVolume() {
            const volume = document.getElementById('volume-bar').value;
            console.log(`Volume adjusted to: ${volume}%`);
            // Êõ¥Êñ∞Èü≥ÈáèÂõæÊ†á
            const volumeIcon = document.getElementById('volume-icon');
            if (volume == 0) {
                volumeIcon.className = 'fa-solid fa-volume-mute';
            } else if (volume < 50) {
                volumeIcon.className = 'fa-solid fa-volume-low';
            } else {
                volumeIcon.className = 'fa-solid fa-volume-up';
            }
        }

        // Êí≠ÊîæÊöÇÂÅú
        function playPause() {
            console.log('Play/Pause toggled');
        }

        // ËÆæÁΩÆÊí≠ÊîæËøõÂ∫¶
        function setProgress() {
            const progress = document.getElementById('progress-bar').value;
            console.log(`Progress set to: ${progress}%`);
        }
    </script>
    
    <!-- Ëø∑‰Ω†Êí≠ÊîæÂô® -->
    <div id="mini-player">
        <div class="player-content">
            <div class="player-info">
                <div class="song-info">
                    <h4 id="now-playing-title">Song Title</h4>
                    <p id="now-playing-artist">Artist</p>
                </div>
            </div>
            
            <div class="player-controls">
                <button id="shuffle-btn" class="control-btn">üîÄ</button>
                <button id="prev-btn" class="control-btn">‚èÆÔ∏è</button>
                <button id="play-pause-btn" class="control-btn play-btn">‚ñ∂Ô∏è</button>
                <button id="next-btn" class="control-btn">‚è≠Ô∏è</button>
                <button id="repeat-btn" class="control-btn">üîÅ</button>
            </div>
            
            <div class="player-progress">
                <span id="current-time">0:00</span>
                <input type="range" id="progress-bar" min="0" max="100" value="0">
                <span id="total-time">0:00</span>
            </div>
            
            <div class="volume-control">
                <button id="volume-btn" class="control-btn">üîä</button>
                <input type="range" id="volume-slider" min="0" max="100" value="80">
            </div>
        </div>
    </div>
    
    <!-- Èü≥È¢ëÂÖÉÁ¥† -->
    <audio id="audio-player" preload="metadata"></audio>
    
    <script src="js/mini-player.js"></script>
</body>
</html>
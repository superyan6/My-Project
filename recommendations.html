<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Music Vault - Recommendations</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/mini-player.css">
  <link rel="stylesheet" href="css/common.css">
  <style>
    /* Netease Cloud Music Style */
    :root {
      --primary-color: #d32f2f;
      --secondary-color: #333;
      --background-color: #121212;
      --card-background: #181818;
      --card-hover: #282828;
      --text-primary: #fff;
      --text-secondary: #b3b3b3;
      --border-color: #282828;
      --header-height: 64px;
      --sidebar-width: 240px;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-primary);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }

    .app-container {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar Styles */
    .sidebar {
      width: var(--sidebar-width);
      background-color: #000;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
    }

    .sidebar-header {
      padding: 20px 24px;
    }

    .app-logo {
      font-size: 24px;
      font-weight: bold;
      color: var(--primary-color);
    }

    .sidebar-nav {
      flex: 1;
      padding: 20px 0;
    }

    .nav-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .nav-item {
      margin: 4px 0;
    }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 12px 24px;
      color: var(--text-secondary);
      text-decoration: none;
      transition: all 0.2s ease;
    }

    .nav-link:hover {
      background-color: var(--card-hover);
      color: var(--text-primary);
    }

    .nav-item.active .nav-link {
      background-color: var(--card-hover);
      color: var(--primary-color);
      font-weight: 600;
    }

    .nav-icon {
      font-size: 20px;
      width: 24px;
      text-align: center;
    }

    .sidebar-footer {
      padding: 20px 24px;
      border-top: 1px solid var(--border-color);
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .username {
      font-size: 14px;
    }

    /* Main Content Styles */
    .main-content {
      margin-left: var(--sidebar-width);
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }

    .top-bar {
      height: var(--header-height);
      background-color: rgba(18, 18, 18, 0.95);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 32px;
      border-bottom: 1px solid var(--border-color);
    }

    .search-container {
      flex: 1;
      max-width: 500px;
    }

    .search-box {
      display: flex;
      align-items: center;
      background-color: var(--card-background);
      border-radius: 20px;
      padding: 0 16px;
      height: 40px;
    }

    .search-icon {
      color: var(--text-secondary);
      margin-right: 8px;
    }

    .search-input {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--text-primary);
      outline: none;
      height: 100%;
    }

    .top-actions {
      display: flex;
      gap: 16px;
    }

    .action-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: var(--card-background);
      border: none;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .action-btn:hover {
      background-color: var(--card-hover);
      color: var(--text-primary);
    }

    .content {
      flex: 1;
      overflow-y: auto;
      padding: 32px;
    }

    /* Banner Section */
    .banner {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      border-radius: 12px;
      padding: 40px;
      margin-bottom: 40px;
      display: flex;
      align-items: center;
      gap: 32px;
    }

    .banner-image {
      width: 180px;
      height: 180px;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }

    .banner-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .banner-content {
      flex: 1;
    }

    .banner-subtitle {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 8px;
    }

    .banner-title {
      font-size: 32px;
      font-weight: bold;
      margin: 0 0 16px 0;
      color: white;
    }

    .banner-description {
      font-size: 16px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 24px;
      line-height: 1.6;
    }

    .banner-actions {
      display: flex;
      gap: 16px;
    }

    .banner-btn {
      padding: 12px 24px;
      border-radius: 24px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .banner-btn-primary {
      background-color: var(--primary-color);
      color: white;
    }

    .banner-btn-primary:hover {
      background-color: #c62828;
      transform: scale(1.05);
    }

    .banner-btn-secondary {
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .banner-btn-secondary:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    /* Section Styles */
    .section {
      margin-bottom: 40px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      margin: 0;
    }

    .section-link {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      transition: color 0.2s ease;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .section-link:hover {
      color: var(--text-primary);
    }

    /* Card Grid */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 24px;
    }

    .card {
      background-color: var(--card-background);
      border-radius: 8px;
      padding: 20px;
      transition: all 0.2s ease;
      cursor: pointer;
      position: relative;
    }

    .card:hover {
      background-color: var(--card-hover);
      transform: translateY(-4px);
    }

    .card:hover .card-play-btn {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }

    .card-image {
      width: 100%;
      aspect-ratio: 1;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 16px;
      position: relative;
    }

    .card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .card-play-btn {
      position: absolute;
      bottom: 16px;
      right: 16px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--primary-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.8);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 8px 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .card-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Album Grid */
    .album-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 24px;
    }

    .album-card {
      background-color: var(--card-background);
      border-radius: 8px;
      padding: 16px;
      transition: all 0.2s ease;
      cursor: pointer;
      position: relative;
    }

    .album-card:hover {
      background-color: var(--card-hover);
    }

    .album-card:hover .card-play-btn {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }

    .album-image {
      width: 100%;
      aspect-ratio: 1;
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 12px;
      position: relative;
    }

    .album-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .album-title {
      font-size: 14px;
      font-weight: 600;
      margin: 0 0 4px 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .album-artist {
      font-size: 12px;
      color: var(--text-secondary);
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Featured Artists */
    .artist-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 24px;
    }

    .artist-card {
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .artist-card:hover {
      transform: translateY(-4px);
    }

    .artist-avatar {
      width: 100%;
      aspect-ratio: 1;
      border-radius: 50%;
      overflow: hidden;
      margin-bottom: 12px;
      border: 2px solid var(--border-color);
      background-color: var(--card-background);
    }

    .artist-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .artist-name {
      font-size: 14px;
      font-weight: 600;
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Daily Recommendation Card */
    .daily-rec-card {
      background-color: var(--card-background);
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.2s ease;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .daily-rec-card:hover {
      background-color: var(--card-hover);
    }

    .daily-rec-header {
      background: linear-gradient(135deg, var(--primary-color) 0%, #f44336 100%);
      padding: 20px;
      text-align: center;
    }

    .daily-rec-icon {
      font-size: 48px;
      margin-bottom: 12px;
    }

    .daily-rec-date {
      font-size: 14px;
      opacity: 0.9;
    }

    .daily-rec-content {
      padding: 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .daily-rec-title {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 16px 0;
      text-align: center;
    }

    .daily-rec-list {
      list-style: none;
      padding: 0;
      margin: 0;
      flex: 1;
    }

    .daily-rec-item {
      display: flex;
      align-items: center;
      padding: 8px 0;
      gap: 12px;
    }

    .daily-rec-number {
      font-size: 14px;
      color: var(--text-secondary);
      width: 20px;
      text-align: center;
    }

    .daily-rec-song {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 14px;
    }

    .daily-rec-play {
      color: var(--text-secondary);
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .daily-rec-item:hover .daily-rec-play {
      opacity: 1;
      color: var(--primary-color);
    }

    .daily-rec-footer {
      text-align: center;
      padding: 0 20px 20px;
    }

    .daily-rec-btn {
      background-color: transparent;
      border: 1px solid var(--primary-color);
      color: var(--primary-color);
      padding: 8px 24px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .daily-rec-btn:hover {
      background-color: var(--primary-color);
      color: white;
    }

    /* Quick Links */
    .quick-links {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 16px;
      margin-bottom: 40px;
    }

    .quick-link {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      border-radius: 8px;
      padding: 24px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      min-height: 120px;
      justify-content: center;
    }

    .quick-link:hover {
      transform: translateY(-4px);
    }

    .quick-link-icon {
      font-size: 32px;
    }

    .quick-link-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0;
    }

    .quick-link:nth-child(2) {
      background: linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%);
    }

    .quick-link:nth-child(3) {
      background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
    }

    .quick-link:nth-child(4) {
      background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
    }

    /* Bottom Player */
    .bottom-player {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 96px;
      background-color: #181818;
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 24px;
      z-index: 1000;
    }

    .player-container {
      display: flex;
      align-items: center;
      gap: 32px;
      width: 100%;
    }

    .now-playing {
      display: flex;
      align-items: center;
      gap: 16px;
      width: 30%;
    }

    .song-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .song-cover {
      width: 64px;
      height: 64px;
      border-radius: 4px;
      overflow: hidden;
    }

    .song-cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .song-details h4 {
      margin: 0 0 4px 0;
      font-size: 14px;
      font-weight: 600;
    }

    .song-details p {
      margin: 0;
      font-size: 12px;
      color: var(--text-secondary);
    }

    .favorite-btn {
      background: none;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 18px;
      transition: color 0.2s ease;
    }

    .favorite-btn.active {
      color: var(--primary-color);
    }

    .player-controls {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .control-buttons {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .control-btn {
      background: none;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      transition: color 0.2s ease;
    }

    .control-btn:hover {
      color: var(--text-primary);
    }

    .play-pause-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--text-primary);
      color: var(--secondary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .play-pause-btn:hover {
      background-color: #fff;
      transform: scale(1.05);
    }

    .progress-container {
      display: flex;
      align-items: center;
      gap: 12px;
      width: 100%;
      max-width: 600px;
    }

    .time {
      font-size: 12px;
      color: var(--text-secondary);
      width: 45px;
      text-align: center;
    }

    .progress-bar {
      flex: 1;
      height: 4px;
      background-color: var(--border-color);
      border-radius: 2px;
      position: relative;
      cursor: pointer;
    }

    .progress-fill {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 30%;
      background-color: var(--primary-color);
      border-radius: 2px;
    }

    .volume-control {
      display: flex;
      align-items: center;
      gap: 12px;
      width: 20%;
      justify-content: flex-end;
    }

    .volume-slider-container {
      width: 100px;
    }

    #volume-slider {
      width: 100%;
      height: 4px;
      background-color: var(--border-color);
      border-radius: 2px;
      outline: none;
      -webkit-appearance: none;
    }

    #volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: var(--text-secondary);
      cursor: pointer;
    }

    .playlist-btn {
      background: none;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 18px;
      transition: color 0.2s ease;
    }

    .playlist-btn:hover {
      color: var(--text-primary);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      
      .main-content {
        margin-left: 0;
      }
      
      .banner {
        flex-direction: column;
        text-align: center;
        padding: 32px 24px;
      }
      
      .banner-image {
        width: 120px;
        height: 120px;
      }
      
      .banner-title {
        font-size: 24px;
      }
      
      .card-grid, .album-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .artist-grid {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .quick-links {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .player-container {
        flex-direction: column;
        gap: 16px;
      }
      
      .now-playing,
      .volume-control {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="app-logo">My Music Vault</div>
      </div>
      
      <nav class="sidebar-nav">
        <ul class="nav-list">
          <li class="nav-item">
            <a href="index.html" class="nav-link">
              <span class="nav-icon"><i class="fas fa-home"></i></span>
              Home
            </a>
          </li>
          <li class="nav-item">
            <a href="favorites.html" class="nav-link">
              <span class="nav-icon"><i class="fas fa-heart"></i></span>
              My Favorites
            </a>
          </li>
          <li class="nav-item">
            <a href="recent.html" class="nav-link">
              <span class="nav-icon"><i class="fas fa-history"></i></span>
              Recently Played
            </a>
          </li>
          <li class="nav-item active">
            <a href="recommendations.html" class="nav-link">
              <span class="nav-icon"><i class="fas fa-compass"></i></span>
              Recommendations
            </a>
          </li>
          <li class="nav-item">
            <a href="discussion.html" class="nav-link">
              <span class="nav-icon"><i class="fas fa-comments"></i></span>
              Discussion
            </a>
          </li>
          <!-- Playlists page has been removed -->
        </ul>
      </nav>
      
      <div class="sidebar-footer">
        <div class="user-profile">
          <div class="avatar">JD</div>
          <span class="username">John Doe</span>
        </div>
      </div>
    </aside>
    
    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Top Bar with Search -->
      <div class="top-bar">
        <div class="search-container">
          <div class="search-box">
            <span class="search-icon"><i class="fas fa-search"></i></span>
            <input type="text" class="search-input" oninput="searchSongs()" placeholder="Search music, artists, or playlists...">
          </div>
        </div>
        <div class="top-actions">
          <button class="action-btn"><i class="fas fa-bell"></i></button>
          <button class="action-btn"><i class="fas fa-cog"></i></button>
        </div>
      </div>
      
      <!-- Content Section -->
      <div class="content">
        <!-- 搜索结果区域 -->
        <div id="search-results-container" class="song-list" style="display: none;">
          <div class="song-list-header">
            <div class="song-number">#</div>
            <div>Song</div>
            <div>Album</div>
            <div>Date Added</div>
            <div>Duration</div>
          </div>
        </div>
        
        <!-- Quick Links Section removed -->
        
        <!-- Banner Section -->
        <div class="banner">
          <div class="banner-image">
            <img src="images/picture1.jpg" alt="Featured Playlist">
          </div>
          <div class="banner-content">
            <p class="banner-subtitle">Featured Playlist</p>
            <h2 class="banner-title">Your Daily Mix</h2>
            <p class="banner-description">Personalized songs based on your listening habits. Updated daily with fresh tracks you'll love.</p>
            <div class="banner-actions">
              <button onclick="playAllSongs()" class="banner-btn banner-btn-primary">
                <i class="fas fa-play"></i>
                Play All
              </button>
            </div>
          </div>
        </div>
        
        <!-- Daily Recommendation Section -->
        <div class="section">
          <div class="section-header">
            <h2 class="section-title">Daily Recommendations</h2>
            <a href="#" class="section-link">
              View All
              <i class="fas fa-chevron-right"></i>
            </a>
          </div>
          
          <div class="card-grid">
            <div class="daily-rec-card">
              <div class="daily-rec-header">
                <i class="fas fa-magic daily-rec-icon"></i>
                <div class="daily-rec-date">Today's Selection</div>
              </div>
              <div class="daily-rec-content">
                <h3 class="daily-rec-title">Daily Discovery</h3>
                <ul class="daily-rec-list">
                  <li class="daily-rec-item">
                    <span class="daily-rec-number">1</span>
                    <span class="daily-rec-song">Lemon Tree - Fool's Garden</span>
                    <span class="daily-rec-play" onclick="playDailySong('Lemon Tree')"><i class="fas fa-play"></i></span>
                  </li>
                  <li class="daily-rec-item">
                    <span class="daily-rec-number">2</span>
                    <span class="daily-rec-song">Ride It - Various Artists</span>
                    <span class="daily-rec-play" onclick="playDailySong('Ride It')"><i class="fas fa-play"></i></span>
                  </li>
                  <li class="daily-rec-item">
                    <span class="daily-rec-number">3</span>
                    <span class="daily-rec-song">Nothing On You - Various Artists</span>
                    <span class="daily-rec-play" onclick="playDailySong('Nothing On You')"><i class="fas fa-play"></i></span>
                  </li>
                </ul>
              </div>
            </div>
            
            <!-- Personalized Playlists -->
            <div class="card">
              <div class="card-image">
                <img src="images/picture2.jpg" alt="Personalized Mix">
                <button class="card-play-btn personal-mix-play" data-song="In The End" data-artist="Linkin Park" data-cover="images/picture2.jpg"><i class="fas fa-play"></i></button>
              </div>
              <h3 class="card-title">Personalized Mix</h3>
              <p class="card-subtitle">Songs you'll love</p>
            </div>
            
            <div class="card">
              <div class="card-image">
                <img src="images/picture3.jpg" alt="Discover Weekly">
                <button class="card-play-btn discover-weekly-play" data-song="We Don't Talk Anymore" data-artist="Charlie Puth" data-cover="images/picture3.jpg"><i class="fas fa-play"></i></button>
              </div>
              <h3 class="card-title">Discover Weekly</h3>
              <p class="card-subtitle">New music for you</p>
            </div>
            
            <div class="card">
              <div class="card-image">
                <img src="images/picture1.jpg" alt="Repeat Rewind">
                <button class="card-play-btn repeat-rewind-play" data-song="That Girl" data-artist="Olly Murs" data-cover="images/picture1.jpg"><i class="fas fa-play"></i></button>
              </div>
              <h3 class="card-title">Repeat Rewind</h3>
              <p class="card-subtitle">Songs you've missed</p>
            </div>
          </div>
        </div>
        
        <!-- Top Playlists Section removed as requested -->
        
        <!-- Sections removed as requested -->
      </div>
    </main>
  </div>
  
  <!-- 底部迷你播放器 - 统一使用全局播放器 -->
  <div class="bottom-player">
      <!-- 歌曲信息区域 -->
      <div class="player-info">
          <img id="mini-player-cover" class="mini-player-cover" src="images/picture1.jpg" alt="专辑封面">
          <div class="track-details">
              <div id="mini-player-title" class="mini-player-title">未知歌曲</div>
              <div id="mini-player-artist" class="mini-player-artist">未知艺术家</div>
          </div>
          <button id="favorite-btn" title="收藏">
              <i class="far fa-heart"></i>
          </button>
      </div>
      
      <!-- 播放控制区域 -->
      <div class="player-controls">
          <div class="controls-buttons">
              <button id="shuffle-btn" class="control-btn" title="随机播放">
                  <i class="fas fa-random"></i>
              </button>
              <button id="prev-btn" class="control-btn" title="上一首">
                  <i class="fas fa-step-backward"></i>
              </button>
              <button id="play-pause-btn" class="control-btn" title="播放/暂停">
                  <i class="fas fa-play"></i>
              </button>
              <button id="next-btn" class="control-btn" title="下一首">
                  <i class="fas fa-step-forward"></i>
              </button>
              <button id="repeat-btn" class="control-btn" title="重复播放">
                  <i class="fas fa-redo"></i>
              </button>
          </div>
          <div class="progress-container">
              <span id="current-time">0:00</span>
              <div id="progress-bar">
                  <div id="progress-fill"></div>
              </div>
              <span id="total-time">0:00</span>
          </div>
      </div>
      
      <!-- 音量控制区域 -->
      <div class="player-volume">
          <button id="volume-btn" class="control-btn" title="音量控制">
              <i class="fas fa-volume-up"></i>
          </button>
          <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.8">
      </div>
  </div>
  
  <!-- 播放列表面板 -->
  <div id="playlist-panel">
      <div class="playlist-header">
          <h3>播放列表</h3>
          <button id="close-playlist">
              <i class="fas fa-times"></i>
          </button>
      </div>
      <div id="playlist-items">
          <!-- 播放列表项目将通过JavaScript动态生成 -->
      </div>
  </div>
  
  <!-- Notification Panel -->
  <div id="notification-panel" class="notification-panel">
    <div class="notification-header">
      <h3>Notifications</h3>
      <button id="clear-notifications">Clear All</button>
    </div>
    <div class="notification-list">
      <div class="notification-item unread">
        <div class="notification-content">New album "Summer Vibes" is now available</div>
        <div class="notification-time">Today 12:30</div>
      </div>
      <div class="notification-item unread">
        <div class="notification-content">Your followed artist Jay Park released a new song</div>
        <div class="notification-time">Yesterday 18:45</div>
      </div>
      <div class="notification-item unread">
        <div class="notification-content">Your playlists have been synced</div>
        <div class="notification-time">2 days ago</div>
      </div>
      <div class="notification-item">
        <div class="notification-content">Welcome to Music Player!</div>
        <div class="notification-time">3 days ago</div>
      </div>
    </div>
  </div>
  
  <!-- Settings Panel -->
  <div id="settings-panel" class="settings-panel">
    <div class="settings-header">
      <h3>Settings</h3>
      <button id="close-settings"><i class="fas fa-times"></i></button>
    </div>
    <div class="settings-content">
      <div class="setting-item">
        <div class="setting-label">
          <span>Auto Play</span>
          <label class="toggle-switch">
            <input type="checkbox" id="auto-play-toggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-description">Automatically play next track when current ends</div>
      </div>
      <div class="setting-item">
        <div class="setting-label">
          <span>Notifications</span>
          <label class="toggle-switch">
            <input type="checkbox" id="notification-toggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-description">Receive new album and event notifications</div>
      </div>
      <div class="setting-item">
        <div class="setting-label">
          <span>Default Volume</span>
          <span id="volume-value">80%</span>
        </div>
        <input type="range" id="default-volume-slider" class="setting-slider" min="0" max="100" value="80">
      </div>
      <div class="setting-item">
        <div class="setting-label">
          <span>Audio Quality</span>
          <label class="toggle-switch">
            <input type="checkbox" id="high-quality-toggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-description">High quality playback uses more data</div>
      </div>
      <div class="setting-item">
        <div class="setting-label">
          <span>Dark Mode</span>
          <label class="toggle-switch">
            <input type="checkbox" id="dark-mode-toggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-description">Use dark theme interface</div>
      </div>
    </div>
  </div>

  <!-- 音频元素 - 使用单一全局音频元素 -->
  <audio id="audio-player" preload="metadata"></think>

  <!-- 基础功能脚本 -->
  <script type="text/javascript">
  // 播放列表数据
  var playlist = [
    { title: '天天', artist: '刘德华', src: 'mp3/天天.mp3', cover: 'images/default-cover.png' },
    { title: 'Lemon Tree', artist: 'Fool\'s Garden', src: 'mp3/lemon-tree.mp3', cover: 'images/picture1.jpg' },
    { title: 'Ride It', artist: 'Various Artists', src: 'mp3/ride it.mp3', cover: 'images/picture2.jpg' },
    { title: 'We Don\'t Talk Anymore', artist: 'Charlie Puth', src: 'mp3/we don\'t talk anymore.mp3', cover: 'images/picture3.jpg' },
    { title: 'That Girl', artist: 'Olly Murs', src: 'mp3/that girl.mp3', cover: 'images/picture1.jpg' }
  ];
  
  // 播放状态
  var currentTrackIndex = 0;
  var isPlaying = false;
  var isReverse = true; // 默认启用逆序播放
  
  // 格式化时间函数
  function formatTime(seconds) {
    if (isNaN(seconds)) return '0:00';
    var minutes = Math.floor(seconds / 60);
    var remainingSeconds = Math.floor(seconds % 60);
    return minutes + ':' + (remainingSeconds < 10 ? '0' : '') + remainingSeconds;
  }
  
  // 更新进度条函数
  function updateProgress() {
    var audio = document.getElementById('audio-player');
    var progressBar = document.getElementById('progress-bar');
    var progressFill = document.getElementById('progress-fill');
    var currentTimeElement = document.getElementById('current-time');
    var totalTimeElement = document.getElementById('total-time');
    
    if (audio && progressBar && progressFill && currentTimeElement && totalTimeElement) {
      var progress = (audio.currentTime / audio.duration) * 100;
      if (!isNaN(progress)) {
        progressFill.style.width = progress + '%';
      }
      
      currentTimeElement.textContent = formatTime(audio.currentTime);
      totalTimeElement.textContent = formatTime(audio.duration);
    }
  }
  
  // 设置进度条点击事件
  function setupProgressBar() {
    var progressBar = document.getElementById('progress-bar');
    var audio = document.getElementById('audio-player');
    
    if (progressBar && audio) {
      progressBar.addEventListener('click', function(e) {
        var rect = progressBar.getBoundingClientRect();
        var clickX = e.clientX - rect.left;
        var width = rect.width;
        var percent = clickX / width;
        audio.currentTime = percent * audio.duration;
      });
    }
  }
  
  function playAllSongs() {
    var audio = document.getElementById('audio-player');
    if (audio && playlist.length > 0) {
      // 使用默认的第一首歌
      currentTrackIndex = 0;
      playTrack(currentTrackIndex);
    }
  }
  
  function playTrack(index) {
    if (index < 0 || index >= playlist.length) return;
    
    currentTrackIndex = index;
    var track = playlist[index];
    var audio = document.getElementById('audio-player');
    
    if (audio) {
      audio.src = track.src;
      
      var title = document.getElementById('mini-player-title');
      if (title) {
        title.innerHTML = track.title;
      }
      
      var artist = document.getElementById('mini-player-artist');
      if (artist) {
        artist.innerHTML = track.artist;
      }
      
      var cover = document.getElementById('mini-player-cover');
      if (cover) {
        cover.src = track.cover;
      }
      
      audio.play();
      isPlaying = true;
      updatePlayPauseButton();
    }
  }
  
  function togglePlayPause() {
    var audio = document.getElementById('audio-player');
    if (audio) {
      if (isPlaying) {
        audio.pause();
      } else {
        audio.play();
      }
      isPlaying = !isPlaying;
      updatePlayPauseButton();
    }
  }
  
  function updatePlayPauseButton() {
    var playPauseBtn = document.getElementById('play-pause-btn');
    if (playPauseBtn) {
      var icon = playPauseBtn.querySelector('i');
      if (icon) {
        icon.className = isPlaying ? 'fas fa-pause' : 'fas fa-play';
      }
    }
  }
  
  function nextTrack() {
    // 如果是逆序播放，下一首实际上是上一首
    if (isReverse) {
      currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
    } else {
      currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
    }
    playTrack(currentTrackIndex);
  }
  
  function prevTrack() {
    // 如果是逆序播放，上一首实际上是下一首
    if (isReverse) {
      currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
    } else {
      currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
    }
    playTrack(currentTrackIndex);
  }
  
  function toggleReverse() {
    isReverse = !isReverse;
    var shuffleBtn = document.getElementById('shuffle-btn');
    if (shuffleBtn) {
      // 使用逆序图标的class来标记状态
      if (isReverse) {
        shuffleBtn.classList.add('reverse-mode');
      } else {
        shuffleBtn.classList.remove('reverse-mode');
      }
    }
  }
  
  function playDailySong(songTitle) {
    // 找到播放列表中对应的歌曲并播放
    for (var i = 0; i < playlist.length; i++) {
      if (playlist[i].title.toLowerCase().includes(songTitle.toLowerCase())) {
        playTrack(i);
        return;
      }
    }
    
    // 如果在播放列表中找不到，则创建临时歌曲信息并播放
    if (songTitle === 'Nothing On You') {
      // 添加Nothing On You到播放列表
      var nothingOnYou = {
        title: 'Nothing On You',
        artist: 'Various Artists',
        src: 'mp3/nothing on you.mp3',
        cover: 'images/picture2.jpg'
      };
      playlist.push(nothingOnYou);
      playTrack(playlist.length - 1);
    }
  }
  
  function searchSongs() {
    var input = document.querySelector('.search-input');
    var searchResultsContainer = document.getElementById('search-results-container');
    var sections = document.querySelectorAll('.section');
    var banner = document.querySelector('.banner');
    
    if (input) {
      var query = input.value.trim();
      query = query.toLowerCase();
      
      // 搜索框为空时显示所有内容
      if (query === '') {
        // 显示所有原始内容
        if (banner) banner.style.display = '';
        sections.forEach(function(section) {
          section.style.display = '';
        });
        
        // 隐藏搜索结果容器
        if (searchResultsContainer) {
          searchResultsContainer.style.display = 'none';
        }
        
        // 确保所有可搜索项目都显示
        var allItems = document.querySelectorAll('.song-list-item, .track-card, .card, .album-card, .daily-rec-item');
        allItems.forEach(function(item) {
          item.style.display = '';
        });
        
        return;
      }
      
      // 有搜索内容时，执行筛选逻辑
      var hasResults = false;
      var items = document.querySelectorAll('.song-list-item, .track-card, .card, .album-card, .daily-rec-item');
      
      items.forEach(function(item) {
        var text = item.textContent.toLowerCase();
        // 检查是否包含搜索关键词
        if (text.includes(query)) {
          item.style.display = '';
          
          // 确保父容器可见
          var parentSection = item.closest('.section');
          if (parentSection) {
            parentSection.style.display = '';
          }
          
          hasResults = true;
        } else {
          item.style.display = 'none';
        }
      });
      
      // 处理Banner显示（如果搜索结果较少，可以隐藏banner突出显示搜索结果）
      if (banner) {
        banner.style.display = hasResults ? 'none' : '';
      }
      
      // 更新搜索结果容器的显示状态
      if (searchResultsContainer) {
        searchResultsContainer.style.display = hasResults ? 'block' : 'none';
      }
    }
  }
  
  // 播放指定歌曲的通用函数
  function playSpecificSong(title, artist, cover, src) {
    var audio = document.getElementById('audio-player');
    if (audio) {
      // 设置音频源
      audio.src = src;
      
      // 更新迷你播放器显示
      var titleElement = document.getElementById('mini-player-title');
      var artistElement = document.getElementById('mini-player-artist');
      var coverElement = document.getElementById('mini-player-cover');
      
      if (titleElement && artistElement && coverElement) {
        titleElement.textContent = title;
        artistElement.textContent = artist;
        coverElement.src = cover;
      }
      
      // 更新播放状态
      audio.play();
      isPlaying = true;
      updatePlayPauseButton();
    }
  }
  
  // 播放Personal Mix歌曲
  function playPersonalMix() {
    playSpecificSong('In The End', 'Linkin Park', 'images/picture2.jpg', 'mp3/in the end.mp3');
    
    // 更新播放按钮图标
    var playButton = this.querySelector('i');
    if (playButton) {
      playButton.className = 'fas fa-pause';
    }
  }
  
  // 播放Discover Weekly歌曲
  function playDiscoverWeekly() {
    playSpecificSong('We Don\'t Talk Anymore', 'Charlie Puth', 'images/picture3.jpg', 'mp3/we don\'t talk anymore.mp3');
    
    // 更新播放按钮图标
    var playButton = this.querySelector('i');
    if (playButton) {
      playButton.className = 'fas fa-pause';
    }
  }
  
  // 播放Repeat Rewind歌曲
  function playRepeatRewind() {
    playSpecificSong('That Girl', 'Olly Murs', 'images/picture1.jpg', 'mp3/that girl.mp3');
    
    // 更新播放按钮图标
    var playButton = this.querySelector('i');
    if (playButton) {
      playButton.className = 'fas fa-pause';
    }
  }
  
  // 添加事件监听
  window.onload = function() {
    // 为Personal Mix播放按钮添加点击事件
    var personalMixPlayBtn = document.querySelector('.personal-mix-play');
    if (personalMixPlayBtn) {
      personalMixPlayBtn.addEventListener('click', playPersonalMix);
    }
    
    // 为Discover Weekly播放按钮添加点击事件
    var discoverWeeklyPlayBtn = document.querySelector('.discover-weekly-play');
    if (discoverWeeklyPlayBtn) {
      discoverWeeklyPlayBtn.addEventListener('click', playDiscoverWeekly);
    }
    
    // 为Repeat Rewind播放按钮添加点击事件
    var repeatRewindPlayBtn = document.querySelector('.repeat-rewind-play');
    if (repeatRewindPlayBtn) {
      repeatRewindPlayBtn.addEventListener('click', playRepeatRewind);
    }
    
    // 播放/暂停按钮
    var playPauseBtn = document.getElementById('play-pause-btn');
    if (playPauseBtn) {
      playPauseBtn.addEventListener('click', togglePlayPause);
    }
    
    // 下一首按钮
    var nextBtn = document.getElementById('next-btn');
    if (nextBtn) {
      nextBtn.addEventListener('click', nextTrack);
    }
    
    // 上一首按钮
    var prevBtn = document.getElementById('prev-btn');
    if (prevBtn) {
      prevBtn.addEventListener('click', prevTrack);
    }
    
    // 音频元素
    var audio = document.getElementById('audio-player');
    
    // 循环模式
    let repeatMode = 0; // 0: 不循环, 1: 单曲循环, 2: 列表循环
    
    // 为循环按钮添加功能
    var repeatBtn = document.getElementById('repeat-btn');
    if (repeatBtn) {
      repeatBtn.addEventListener('click', function() {
        // 切换循环模式
        repeatMode = (repeatMode + 1) % 3;
        
        // 更新按钮样式
        repeatBtn.className = 'control-btn';
        
        if (repeatMode === 1) {
          // 单曲循环
          repeatBtn.classList.add('repeat-one');
          repeatBtn.classList.add('active');
          if (audio) {
            audio.loop = true;
          }
        } else if (repeatMode === 2) {
          // 列表循环
          repeatBtn.classList.add('active');
          if (audio) {
            audio.loop = false;
          }
        } else {
          // 不循环
          if (audio) {
            audio.loop = false;
          }
        }
      });
    }
    
    // 为随机播放按钮添加功能
    var shuffleBtn = document.getElementById('shuffle-btn');
    if (shuffleBtn) {
      shuffleBtn.addEventListener('click', function() {
        isReverse = !isReverse;
        shuffleBtn.classList.toggle('active', isReverse);
      });
    }
    
    // 音频结束时处理
    if (audio) {
      audio.addEventListener('ended', function() {
        if (repeatMode === 0) {
          // 不循环，更新播放按钮状态
          isPlaying = false;
          updatePlayPauseButton();
        } else if (repeatMode === 1) {
          // 单曲循环已经通过audio.loop实现
          audio.play();
        } else if (repeatMode === 2) {
          // 列表循环，播放下一首
          nextTrack();
        }
      });
      
      // 监听timeupdate事件来更新进度条
      audio.addEventListener('timeupdate', updateProgress);
      
      // 监听loadedmetadata事件来更新总时长
      audio.addEventListener('loadedmetadata', updateProgress);
    }
    
    // 设置进度条点击事件
    setupProgressBar();
    
    // 音量控制功能
    const volumeSlider = document.getElementById('volume-slider');
    const volumeBtn = document.getElementById('volume-btn');
    
    // 设置初始音量
    if (volumeSlider && audio) {
      audio.volume = volumeSlider.value;
    }
    
    // 音量滑块事件监听
    if (volumeSlider && audio) {
      volumeSlider.addEventListener('input', function() {
        audio.volume = this.value;
        
        // 更新音量图标
        updateVolumeIcon();
      });
    }
    
    // 音量按钮点击事件 - 静音/取消静音
    if (volumeBtn && audio) {
      volumeBtn.addEventListener('click', function() {
        audio.muted = !audio.muted;
        updateVolumeIcon();
        
        // 如果取消静音，确保音量滑块显示正确值
        if (!audio.muted && volumeSlider) {
          volumeSlider.value = audio.volume;
        }
      });
    }
    
    // 更新音量图标函数
    function updateVolumeIcon() {
      if (!volumeBtn || !audio) return;
      
      const icon = volumeBtn.querySelector('i');
      if (audio.muted || audio.volume === 0) {
        icon.className = 'fas fa-volume-mute';
      } else if (audio.volume < 0.5) {
        icon.className = 'fas fa-volume-down';
      } else {
        icon.className = 'fas fa-volume-up';
      }
    }
  };
  </script>
</body>
</html>